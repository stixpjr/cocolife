* TBLGEN 2023-03-23
* GENERATE TABLES FOR
* FAST GAME OF LIFE
TBLGEN	*
* LOCNT
* (I&1)+(I&2)*2+(I&4)*4+(I&8)*8
	LDY	#LOCNT
	LDA	#-128
LOCNT1	LDX	#0
	TFR	A,B
	ANDB	#1
	ABX
	TFR	A,B
	ANDB	#2
	LSLB
	ABX
	TFR	A,B
	ANDB	#4
	LSLB
	LSLB
	ABX
	TFR	A,B
	ANDB	#8
	LSLB
	LSLB
	LSLB
	ABX
	PSHS	A
	TFR	X,D
 	PULS	A
	STB	A,Y
	INCA
	BVC	LOCNT1
* HICNT
* (I&16)/16+(I&32)/8+(I&64)/4+(I&128)/2
	LDY	#HICNT
	LDA	#-128
HICNT1	LDX	#0
	TFR	A,B
	ANDB	#16
	LSRB
	LSRB
	LSRB
	LSRB
	ABX
	TFR	A,B
	ANDB	#32
	LSRB
	LSRB
	LSRB
	ABX
	TFR	A,B
	ANDB	#64
	LSRB
	LSRB
	ABX
	TFR	A,B
	ANDB	#128
	LSRB
	ABX
	PSHS	A
	TFR	X,D
	PULS	A
	STB	A,Y
	INCA
	BVC	HICNT1
* LTSUM
* IF((I&12)/4+(I&48)/16+(I&192)/64==3) THEN B=4
* IF((I&3)+(I&48)/16+(I&192)/64==3) THEN B+=8
	LDY	#LTSUM
	LDA	#-128
LTSUM1	LDX	#0
	CLR	A,Y
	TFR	A,B
	ANDB	#12
	LSRB
	LSRB
	ABX
	TFR	A,B
	ANDB	#48
	LSRB
	LSRB
	LSRB
	LSRB
	ABX
	TFR	A,B
	ANDB	#192
	LSRB
	LSRB
	LSRB
	LSRB
	LSRB
	LSRB
	ABX
	CMPX	#3
	BNE	LTSUM2
	LDB	#4
	STB	A,Y
LTSUM2	LDX	#0
	TFR	A,B
	ANDB	#3
	ABX
	TFR	A,B
	ANDB	#48
	LSRB
	LSRB
	LSRB
	LSRB
	ABX
	TFR	A,B
	ANDB	#192
	LSRB
	LSRB
	LSRB
	LSRB
	LSRB
	LSRB
	ABX
	CMPX	#3
	BNE	LTSUM3
	LDB	A,Y
	ADDB	#8
	STB	A,Y
LTSUM3	INCA
	BVC	LTSUM1
* RTSUM
* IF((I&3)+(I&12)/4+(I&192)/64==3) THEN B=1
* IF((I&3)+(I&12)/4+(I&48)/16==3) THEN B=B+2
	LDY	#RTSUM
	LDA	#-128
RTSUM1	LDX	#0
	CLR	A,Y
	TFR	A,B
	ANDB	#3
	ABX
	TFR	A,B
	ANDB	#12
	LSRB
	LSRB
	ABX
	TFR	A,B
	ANDB	#192
	LSRB
	LSRB
	LSRB
	LSRB
	LSRB
	LSRB
	ABX
	CMPX	#3
	BNE	RTSUM2
	INC	A,Y
RTSUM2	LDX	#0
	TFR	A,B
	ANDB	#3
	ABX
	TFR	A,B
	ANDB	#12
	LSRB
	LSRB
	ABX
	TFR	A,B
	ANDB	#48
	LSRB
	LSRB
	LSRB
	LSRB
	ABX
	CMPX	#3
	BNE	RTSUM3
	INC	A,Y
	INC	A,Y
RTSUM3	INCA
	BVC	RTSUM1
* LTMSK
* IF((I&12)/4+(I&48)/16+(I&192)/64==4) THEN B=4
* IF((I&3)+(I&48)/16+(I&192)/64==4) THEN B=B+8
	LDY	#LTMSK
	LDA	#-128
LTMSK1	LDX	#0
	CLR	A,Y
	TFR	A,B
	ANDB	#12
	LSRB
	LSRB
	ABX
	TFR	A,B
	ANDB	#48
	LSRB
	LSRB
	LSRB
	LSRB
	ABX
	TFR	A,B
	ANDB	#192
	LSRB
	LSRB
	LSRB
	LSRB
	LSRB
	LSRB
	ABX
	CMPX	#4
	BNE	LTMSK2
	LDB	#4
	STB	A,Y
LTMSK2	LDX	#0
	TFR	A,B
	ANDB	#3
	ABX
	TFR	A,B
	ANDB	#48
	LSRB
	LSRB
	LSRB
	LSRB
	ABX
	TFR	A,B
	ANDB	#192
	LSRB
	LSRB
	LSRB
	LSRB
	LSRB
	LSRB
	ABX
	CMPX	#4
	BNE	LTMSK3
	LDB	A,Y
	ADDB	#8
	STB	A,Y
LTMSK3	INCA
	BVC	LTMSK1
* RTMSK
* IF((I&3)+(I&12)/4+(I&192)/64==4) THEN B=1
* IF((I&3)+(I&12)/4+(I&48)/16==4) THEN B=B+2
	LDY	#RTMSK
	LDA	#-128
RTMSK1	LDX	#0
	CLR	A,Y
	TFR	A,B
	ANDB	#3
	ABX
	TFR	A,B
	ANDB	#12
	LSRB
	LSRB
	ABX
	TFR	A,B
	ANDB	#192
	LSRB
	LSRB
	LSRB
	LSRB
	LSRB
	LSRB
	ABX
	CMPX	#4
	BNE	RTMSK2
	INC	A,Y
RTMSK2	LDX	#0
	TFR	A,B
	ANDB	#3
	ABX
	TFR	A,B
	ANDB	#12
	LSRB
	LSRB
	ABX
	TFR	A,B
	ANDB	#48
	LSRB
	LSRB
	LSRB
	LSRB
	ABX
	CMPX	#4
	BNE	RTMSK3
	INC	A,Y
	INC	A,Y
RTMSK3	INCA
	BVC	RTMSK1
* POPCNT
* SET BIT COUNT
	LDY	#POPCNT
	LDA	#-128
POPC1	CLRB
	PSHS	A
POPC2	BITA	#1
	BEQ	POPC3
	INCB
POPC3	LSRA
	BNE	POPC2
	PULS	A
	STB	A,Y
	INCA
	BVC	POPC1
TBLGN1	RTS
* LOOKUP TABLES
* INDEXED BY SIGNED INT8
LOCNT	EQU	*+$080
HICNT	EQU	*+$180
LTSUM	EQU	*+$280
RTSUM	EQU	*+$380
LTMSK	EQU	*+$480
RTMSK	EQU	*+$580
POPCNT	EQU	*+$680
